<div
  class="location"
  *ngIf="activeLocation.locationName && locationProducts.length > 0">
  <h4>{{ activeLocation.locationName }}</h4>
  <p>New Inventory</p>
</div>

<div class="location" *ngIf="activeLocation && locationProducts.length === 0">
  <h4>
    Add products to the {{ activeLocation.locationName }} location to start a
    new inventory.
  </h4>
</div>

<div class="location" *ngIf="!activeLocation">
  <h4>Select a location to start a new inventory.</h4>
</div>

<div class="spinner">
  <mat-spinner *ngIf="loading"></mat-spinner>
</div>

<div class="inventory" *ngIf="activeLocation && locationProducts.length > 0">
  <mat-card class="inventory-card">
    <mat-card-content>
      <form [formGroup]="inventoryForm" (ngSubmit)="onInventorySubmit()">
        <div>
          <div formArrayName="inventory">
            <mat-card
              *ngFor="
                let control of inventoryControls;
                let product;
                of: locationProducts;
                let i = index
              "
              [formGroupName]="i"
              class="inventory-products"
            >
              <div class="inventory-products-input">
                <h6>{{ product.product.name }}</h6>
                <p>Product ID: {{ product.product._id }}</p>
                <p>
                  {{
                    product.product.unitSize + " " + product.product.unit.plural
                  }}
                  {{ " x " + product.product.packSize }} per case
                </p>
                <p>How many {{ product.product.unit.plural }} in stock?</p>
                <mat-form-field appearance="outline" hidden>
                  <input
                    matInput
                    type="text"
                    #locProduct
                    formControlName="locProduct"
                  />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Enter Quantity</mat-label>
                  <input
                    matInput
                    type="number"
                    #quantity
                    formControlName="quantity"
                  />
                </mat-form-field>
                <p *ngIf="quantity.value">
                  Value:
                  {{
                    (product.product.packPrice /
                      (product.product.unitSize * product.product.packSize)) *
                      quantity.value | currency
                  }}
                </p>
              </div>
            </mat-card>
          </div>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions
      align="center"
      *ngIf="locationProducts && locationProducts.length > 0"
    >
      <button mat-raised-button type="submit" color="">
        {{
          userRole === "manager" || "owner" ? "Finalize" : "Submit for Approval"
        }}
      </button>
      <br />
      <br />
      <button mat-raised-button type="button" color="primary">Reset</button>
      <button mat-raised-button type="button" color="accent">Save Draft</button>
    </mat-card-actions>
  </mat-card>
</div>
